{% extends "base.html" %}

{% block title %}Demo - eBay Dropshipping Spy{% endblock %}

{% block content %}
<!-- Demo Hero -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8 mx-auto text-center">
                <h1 class="display-4 fw-bold mb-4">
                    <i class="fas fa-play-circle me-3"></i>
                    Demo: Canlı Analiz Örneği
                </h1>
                <p class="lead mb-4">
                    eBay Dropshipping Spy aracının nasıl çalıştığını görün. 
                    Gerçek verilerle yapılan analiz örneğini inceleyin.
                </p>
                <div class="d-flex gap-3 justify-content-center">
                    <button class="btn btn-light btn-lg" id="startDemo">
                        <i class="fas fa-play me-2"></i>Demo'yu Başlat
                    </button>
                    <a href="/" class="btn btn-outline-light btn-lg">
                        <i class="fas fa-rocket me-2"></i>Gerçek Analiz Yap
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Demo Steps -->
<section class="container mb-5">
    <div class="row">
        <div class="col-12 text-center mb-5">
            <h2 class="display-6 fw-bold">Analiz Süreci</h2>
            <p class="lead text-muted">eBay Dropshipping Spy 3 adımda çalışır</p>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-4 mb-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <div class="feature-icon mx-auto mb-3">
                        <i class="fas fa-search"></i>
                    </div>
                    <h4>1. eBay Tarama</h4>
                    <p class="text-muted">
                        Belirttiğiniz kategoride en çok satan ürünleri bulur. 
                        Satış adedi, fiyat ve ürün detaylarını toplar.
                    </p>
                    <div class="mt-3">
                        <span class="badge bg-primary">Otomatik</span>
                        <span class="badge bg-success">Hızlı</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-md-4 mb-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <div class="feature-icon mx-auto mb-3">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h4>2. Amazon Eşleştirme</h4>
                    <p class="text-muted">
                        Akıllı algoritmalarla Amazon'da benzer ürünleri bulur. 
                        Metin ve görsel benzerlik analizi yapar.
                    </p>
                    <div class="mt-3">
                        <span class="badge bg-warning">AI Destekli</span>
                        <span class="badge bg-info">%85+ Doğruluk</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-md-4 mb-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <div class="feature-icon mx-auto mb-3">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <h4>3. Kar Analizi</h4>
                    <p class="text-muted">
                        Fiyat farkını analiz ederek kar marjını hesaplar. 
                        En karlı fırsatları size sunar.
                    </p>
                    <div class="mt-3">
                        <span class="badge bg-success">Detaylı</span>
                        <span class="badge bg-danger">Karlı</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Live Demo Simulation -->
<section class="container mb-5" id="demoSimulation" style="display: none;">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h4 class="card-title mb-0">
                        <i class="fas fa-tv me-2"></i>
                        Canlı Demo - Electronics Kategorisi
                    </h4>
                </div>
                <div class="card-body">
                    <!-- Demo Progress -->
                    <div class="mb-4">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span id="demoStep">1. eBay ürünleri taranıyor...</span>
                            <span id="demoProgress">0%</span>
                        </div>
                        <div class="progress">
                            <div class="progress-bar progress-bar-striped progress-bar-animated" 
                                 role="progressbar" style="width: 0%" id="demoProgressBar"></div>
                        </div>
                    </div>
                    
                    <!-- Demo Console -->
                    <div class="bg-dark text-light p-3 rounded" style="font-family: monospace; height: 200px; overflow-y: auto;" id="demoConsole">
                        <div class="text-success">eBay Dropshipping Spy v1.0.0</div>
                        <div class="text-muted">Analiz başlatılıyor...</div>
                    </div>
                    
                    <!-- Demo Controls -->
                    <div class="text-center mt-3">
                        <button class="btn btn-success" id="pauseDemo" style="display: none;">
                            <i class="fas fa-pause me-2"></i>Duraklat
                        </button>
                        <button class="btn btn-warning" id="resetDemo" style="display: none;">
                            <i class="fas fa-redo me-2"></i>Yeniden Başlat
                        </button>
                        <button class="btn btn-primary" id="viewDemoResults" style="display: none;">
                            <i class="fas fa-eye me-2"></i>Sonuçları Görüntüle
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Demo Features -->
<section class="container mb-5">
    <div class="row">
        <div class="col-12 text-center mb-5">
            <h2 class="display-6 fw-bold">Öne Çıkan Özellikler</h2>
            <p class="lead text-muted">Neden eBay Dropshipping Spy?</p>
        </div>
    </div>
    
    <div class="row">
        <div class="col-lg-6 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="feature-icon me-3" style="width: 50px; height: 50px; font-size: 20px;">
                            <i class="fas fa-robot"></i>
                        </div>
                        <h5 class="mb-0">Yapay Zeka Destekli</h5>
                    </div>
                    <p class="text-muted">
                        Gelişmiş makine öğrenmesi algoritmaları ile ürün eşleştirme yapır. 
                        %85+ doğruluk oranı ile en iyi eşleşmeleri bulur.
                    </p>
                </div>
            </div>
        </div>
        
        <div class="col-lg-6 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="feature-icon me-3" style="width: 50px; height: 50px; font-size: 20px;">
                            <i class="fas fa-lightning-bolt"></i>
                        </div>
                        <h5 class="mb-0">Hızlı Analiz</h5>
                    </div>
                    <p class="text-muted">
                        Ortalama 3-5 dakikada 10+ ürün için kapsamlı analiz tamamlar. 
                        Zamandan tasarruf ederek daha fazla fırsat yakalar.
                    </p>
                </div>
            </div>
        </div>
        
        <div class="col-lg-6 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="feature-icon me-3" style="width: 50px; height: 50px; font-size: 20px;">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h5 class="mb-0">Detaylı Kar Analizi</h5>
                    </div>
                    <p class="text-muted">
                        Sadece fiyat karşılaştırması değil, kapsamlı karlılık analizi. 
                        Satış hacmi, trend analizi ve risk değerlendirmesi dahil.
                    </p>
                </div>
            </div>
        </div>
        
        <div class="col-lg-6 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="feature-icon me-3" style="width: 50px; height: 50px; font-size: 20px;">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <h5 class="mb-0">Mobil Uyumlu</h5>
                    </div>
                    <p class="text-muted">
                        Her cihazda mükemmel çalışır. Masaüstü, tablet ve mobil cihazlarda 
                        optimized deneyim sunar.
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Demo CTA -->
<section class="container mb-5">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <div class="card bg-primary text-white">
                <div class="card-body text-center p-5">
                    <h3 class="card-title">Kendi Analizinizi Yapın</h3>
                    <p class="card-text lead">
                        Demo'yu beğendiniz mi? Şimdi kendi kategoriniz için 
                        gerçek analiz yapmaya başlayın!
                    </p>
                    <div class="d-flex gap-3 justify-content-center">
                        <a href="/" class="btn btn-light btn-lg">
                            <i class="fas fa-rocket me-2"></i>Analiz Başlat
                        </a>
                        <a href="/results?demo=true" class="btn btn-outline-light btn-lg">
                            <i class="fas fa-chart-line me-2"></i>Demo Sonuçları
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    let demoInterval;
    let demoStep = 0;
    let demoPaused = false;
    
    const demoSteps = [
        { text: "eBay ürünleri taranıyor...", progress: 20, logs: [
            "🔍 eBay kategorisi: Electronics",
            "📊 10 ürün hedefi belirlendi", 
            "⚡ Tarama başlatıldı..."
        ]},
        { text: "En çok satan ürünler bulundu", progress: 40, logs: [
            "✅ 8 ürün bulundu",
            "📈 Satış verileri analiz ediliyor",
            "🏆 En popüler ürünler: Bluetooth kulaklık, USB kablo..."
        ]},
        { text: "Amazon'da eşleşen ürünler aranıyor...", progress: 60, logs: [
            "🔄 Amazon API bağlantısı kuruldu",
            "🤖 AI eşleştirme algoritması çalışıyor",
            "📝 Metin benzerlik analizi yapılıyor..."
        ]},
        { text: "Ürün eşleştirmeleri analiz ediliyor", progress: 80, logs: [
            "🎯 5 eşleşme bulundu",
            "🖼️ Görsel benzerlik kontrolü",
            "💡 Güvenilirlik skorları hesaplanıyor..."
        ]},
        { text: "Kar marjları hesaplanıyor...", progress: 90, logs: [
            "💰 Fiyat farklılıkları analiz ediliyor",
            "📊 Kar marjları hesaplanıyor",
            "⭐ En iyi fırsatlar belirleniyor..."
        ]},
        { text: "Analiz tamamlandı! 🎉", progress: 100, logs: [
            "✨ Analiz başarıyla tamamlandı!",
            "📈 3 karlı fırsat bulundu",
            "🚀 Sonuçlar görüntülenmeye hazır"
        ]}
    ];
    
    $('#startDemo').on('click', function() {
        startDemo();
    });
    
    $('#pauseDemo').on('click', function() {
        if (demoPaused) {
            resumeDemo();
        } else {
            pauseDemo();
        }
    });
    
    $('#resetDemo').on('click', function() {
        resetDemo();
    });
    
    $('#viewDemoResults').on('click', function() {
        window.location.href = '/results?demo=true';
    });
    
    function startDemo() {
        $('#demoSimulation').show();
        $('html, body').animate({
            scrollTop: $('#demoSimulation').offset().top - 100
        }, 1000);
        
        demoStep = 0;
        demoPaused = false;
        clearConsole();
        
        $('#pauseDemo').show();
        $('#resetDemo').show();
        $('#startDemo').prop('disabled', true);
        
        runDemoStep();
    }
    
    function runDemoStep() {
        if (demoPaused || demoStep >= demoSteps.length) return;
        
        const step = demoSteps[demoStep];
        
        // Update progress
        $('#demoStep').text(step.text);
        $('#demoProgress').text(step.progress + '%');
        $('#demoProgressBar').css('width', step.progress + '%');
        
        // Add logs gradually
        let logIndex = 0;
        const logInterval = setInterval(() => {
            if (logIndex >= step.logs.length || demoPaused) {
                clearInterval(logInterval);
                
                // Move to next step after delay
                if (!demoPaused) {
                    setTimeout(() => {
                        demoStep++;
                        if (demoStep >= demoSteps.length) {
                            completeDemo();
                        } else {
                            runDemoStep();
                        }
                    }, 1500);
                }
                return;
            }
            
            addConsoleLog(step.logs[logIndex]);
            logIndex++;
        }, 800);
    }
    
    function pauseDemo() {
        demoPaused = true;
        $('#pauseDemo').html('<i class="fas fa-play me-2"></i>Devam Et');
    }
    
    function resumeDemo() {
        demoPaused = false;
        $('#pauseDemo').html('<i class="fas fa-pause me-2"></i>Duraklat');
        runDemoStep();
    }
    
    function resetDemo() {
        demoPaused = false;
        demoStep = 0;
        clearInterval(demoInterval);
        
        $('#demoProgressBar').css('width', '0%');
        $('#demoProgress').text('0%');
        $('#demoStep').text('Demo yeniden başlatılıyor...');
        $('#viewDemoResults').hide();
        $('#startDemo').prop('disabled', false);
        
        clearConsole();
        
        setTimeout(() => {
            startDemo();
        }, 1000);
    }
    
    function completeDemo() {
        $('#demoStep').text('✅ Analiz tamamlandı!');
        $('#pauseDemo').hide();
        $('#viewDemoResults').show();
        $('#startDemo').prop('disabled', false);
        
        addConsoleLog('<span class="text-success">🎉 Demo tamamlandı! Sonuçları görüntülemek için butona tıklayın.</span>');
    }
    
    function addConsoleLog(message) {
        const timestamp = new Date().toLocaleTimeString('tr-TR');
        const logEntry = `<div>[${timestamp}] ${message}</div>`;
        $('#demoConsole').append(logEntry);
        $('#demoConsole').scrollTop($('#demoConsole')[0].scrollHeight);
    }
    
    function clearConsole() {
        $('#demoConsole').html(`
            <div class="text-success">eBay Dropshipping Spy v1.0.0</div>
            <div class="text-muted">Demo analizi başlatılıyor...</div>
        `);
    }
});
</script>
{% endblock %} 